<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Three.js 3D Demo</title>
  <style>html,body{height:100%;margin:0;background:#111;color:#fff;font-family:Arial}canvas{display:block}</style>
  <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
  <script>
    let scene, camera, renderer, cube, controls;
    let move = {left:false,right:false,up:false,down:false};
    init();
    animate();

    function init(){
      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x20232a);

      camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
      camera.position.set(3,3,6);

      renderer = new THREE.WebGLRenderer({antialias:true});
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      const light = new THREE.DirectionalLight(0xffffff, 1);
      light.position.set(5,10,7);
      scene.add(light);
      scene.add(new THREE.AmbientLight(0x404040, 0.8));

      const planeGeo = new THREE.PlaneGeometry(20,20);
      const planeMat = new THREE.MeshStandardMaterial({color:0x2b2b2b});
      const plane = new THREE.Mesh(planeGeo, planeMat);
      plane.rotation.x = -Math.PI/2;
      plane.position.y = -1.2;
      scene.add(plane);

      const geo = new THREE.BoxGeometry(1,1,1);
      const mat = new THREE.MeshStandardMaterial({color:0x00aaff});
      cube = new THREE.Mesh(geo, mat);
      cube.position.y = 0;
      scene.add(cube);

      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;

      window.addEventListener('resize', onWindowResize);
      window.addEventListener('keydown', (e)=>{ if(e.key==='a'||e.key==='A') move.left=true; if(e.key==='d'||e.key==='D') move.right=true; if(e.key==='w'||e.key==='W') move.up=true; if(e.key==='s'||e.key==='S') move.down=true; });
      window.addEventListener('keyup', (e)=>{ if(e.key==='a'||e.key==='A') move.left=false; if(e.key==='d'||e.key==='D') move.right=false; if(e.key==='w'||e.key==='W') move.up=false; if(e.key==='s'||e.key==='S') move.down=false; });
      
      // 简单说明文字
      const info = document.createElement('div');
      info.style.position='absolute'; info.style.top='8px'; info.style.left='8px';
      info.style.color='#fff'; info.style.fontFamily='Arial'; info.innerHTML = 'WASD 控制方块移动，鼠标拖拽旋转视角';
      document.body.appendChild(info);
    }

    function onWindowResize(){
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate(){
      requestAnimationFrame(animate);
      cube.rotation.x += 0.01;
      cube.rotation.y += 0.01;

      const speed = 0.05;
      if(move.left) cube.position.x -= speed;
      if(move.right) cube.position.x += speed;
      if(move.up) cube.position.z -= speed;
      if(move.down) cube.position.z += speed;

      controls.update();
      renderer.render(scene, camera);
    }
  </script>
</body>
</html>
